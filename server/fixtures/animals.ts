// @ts-ignore
import { Animal } from "../dist/app/models/Animal";
// @ts-ignore
import { Species } from "../dist/app/models/Species";
// Used for dev (to get the typed entity)
//import { Animal } from "../app/models/Animal";
//import { Species } from "../app/models/Species";
import { DataSource } from "typeorm";

const createAnimal = (
  name: string,
  icad: string,
  sexe: string,
  race: string,
  birthdate: Date,
  entryDate: Date,
  distinctiveSigns: string,
  reasonForCare: string,
  placeOfCare: string,
  isSterelised: boolean,
  isAdopted: boolean,
  isBroadcastable: boolean,
  isBookable: boolean,
  species: Species
) => {
  const animal = new Animal();
  animal.name = name;
  animal.icad = icad;
  animal.sexe = sexe;
  animal.race = race;
  animal.birthdate = birthdate;
  animal.entryDate = entryDate;
  animal.distinctiveSigns = distinctiveSigns;
  animal.reasonForCare = reasonForCare;
  animal.placeOfCare = placeOfCare;
  animal.sterilised = isSterelised;
  animal.adopted = isAdopted;
  animal.broadcastable = isBroadcastable;
  animal.bookable = isBookable;
  animal.species = species;
  return animal;
};

export const createAnimals = async (dataSource: DataSource) => {
  // First, get the species from the database
  const speciesRepository = dataSource.getRepository(Species);
  const allSpecies = await speciesRepository.find();

  // Create a map for easy species lookup
  const speciesMap = new Map();
  allSpecies.forEach(species => {
    speciesMap.set(species.id, species);
  });

  const animals = [
    {
      name: "Milo",
      icad: "ICAD000001",
      sexe: "male",
      race: "Chartreux",
      birthdate: new Date("2020-09-20"),
      entryDate: new Date("2024-03-15"),
      distinctiveSigns: "Queue courte",
      reasonForCare: "Trouvé errant",
      placeOfCare: "SPA Lyon",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Luna",
      icad: "ICAD000002",
      sexe: "female",
      race: "Siamois",
      birthdate: new Date("2019-11-12"),
      entryDate: new Date("2024-01-10"),
      distinctiveSigns: "Yeux vairons",
      reasonForCare: "Abandon",
      placeOfCare: "Refuge Bordeaux",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 1,
    },
    {
      name: "Oscar",
      icad: "ICAD000003",
      sexe: "male",
      race: "Golden Retriever",
      birthdate: new Date("2018-04-05"),
      entryDate: new Date("2024-03-01"),
      distinctiveSigns: "Cicatrice patte arrière",
      reasonForCare: "Maltraitance",
      placeOfCare: "SPA Toulouse",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 2,
    },
    {
      name: "Choupette",
      icad: "ICAD000004",
      sexe: "female",
      race: "Persan",
      birthdate: new Date("2021-02-14"),
      entryDate: new Date("2024-02-01"),
      distinctiveSigns: "Poils très longs",
      reasonForCare: "Cession volontaire",
      placeOfCare: "Refuge Marseille",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Noisette",
      icad: "ICAD000005",
      sexe: "female",
      race: "Lapin bélier",
      birthdate: new Date("2022-01-10"),
      entryDate: new Date("2024-02-20"),
      distinctiveSigns: "Oreilles tombantes",
      reasonForCare: "Abandon",
      placeOfCare: "Refuge Lille",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: false,
      isBookable: true,
      speciesId: 3,
    },
    {
      name: "Bella",
      icad: "ICAD000006",
      sexe: "female",
      race: "Labrador",
      birthdate: new Date("2017-06-01"),
      entryDate: new Date("2024-04-05"),
      distinctiveSigns: "Boite légèrement",
      reasonForCare: "Trouvée blessée",
      placeOfCare: "SPA Montpellier",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 2,
    },
    {
      name: "Simba",
      icad: "ICAD000007",
      sexe: "male",
      race: "Maine Coon",
      birthdate: new Date("2020-08-09"),
      entryDate: new Date("2024-04-02"),
      distinctiveSigns: "Très grande taille",
      reasonForCare: "Décès du propriétaire",
      placeOfCare: "Refuge Dijon",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 1,
    },
    {
      name: "Nala",
      icad: "ICAD000008",
      sexe: "female",
      race: "Chinchilla",
      birthdate: new Date("2022-05-01"),
      entryDate: new Date("2024-03-01"),
      distinctiveSigns: "Poils très doux",
      reasonForCare: "Don",
      placeOfCare: "Centre NAC Lyon",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: false,
      isBookable: true,
      speciesId: 4,
    },
    {
      name: "Rex",
      icad: "ICAD000009",
      sexe: "male",
      race: "Husky",
      birthdate: new Date("2019-12-25"),
      entryDate: new Date("2024-02-22"),
      distinctiveSigns: "Yeux bleus très clairs",
      reasonForCare: "Divorce",
      placeOfCare: "SPA Reims",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 2,
    },
    {
      name: "Caramel",
      icad: "ICAD000010",
      sexe: "female",
      race: "Lapin nain",
      birthdate: new Date("2023-04-10"),
      entryDate: new Date("2024-04-05"),
      distinctiveSigns: "Très vive",
      reasonForCare: "Portée non désirée",
      placeOfCare: "Refuge Nancy",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 3,
    },
    {
      name: "Lili",
      icad: "ICAD000011",
      sexe: "female",
      race: "Bleu Russe",
      birthdate: new Date("2020-06-10"),
      entryDate: new Date("2024-04-08"),
      distinctiveSigns: "Silencieuse",
      reasonForCare: "Trouvée sur la voie publique",
      placeOfCare: "Refuge Metz",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Gizmo",
      icad: "ICAD000012",
      sexe: "male",
      race: "Rat domestique",
      birthdate: new Date("2023-02-01"),
      entryDate: new Date("2024-04-10"),
      distinctiveSigns: "Très sociable",
      reasonForCare: "Sauvetage NAC",
      placeOfCare: "Centre NAC Lille",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: false,
      isBookable: true,
      speciesId: 4,
    },
    {
      name: "Shadow",
      icad: "ICAD000013",
      sexe: "male",
      race: "Chat Européen",
      birthdate: new Date("2016-03-01"),
      entryDate: new Date("2024-04-01"),
      distinctiveSigns: "Poil noir",
      reasonForCare: "Errance",
      placeOfCare: "SPA Paris Nord",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Daisy",
      icad: "ICAD000014",
      sexe: "female",
      race: "Beagle",
      birthdate: new Date("2021-09-18"),
      entryDate: new Date("2024-04-05"),
      distinctiveSigns: "Très affectueuse",
      reasonForCare: "Changement de domicile",
      placeOfCare: "Refuge Strasbourg",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 2,
    },
    {
      name: "Flocon",
      icad: "ICAD000015",
      sexe: "male",
      race: "Lapin angora",
      birthdate: new Date("2022-08-20"),
      entryDate: new Date("2024-02-12"),
      distinctiveSigns: "Pelage très long",
      reasonForCare: "Allergie",
      placeOfCare: "Refuge Orléans",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: false,
      isBookable: true,
      speciesId: 3,
    },
    {
      name: "Gribouille",
      icad: "ICAD000016",
      sexe: "female",
      race: "Chat Européen",
      birthdate: new Date("2021-05-13"),
      entryDate: new Date("2024-01-25"),
      distinctiveSigns: "Tache blanche sur le nez",
      reasonForCare: "Portée abandonnée",
      placeOfCare: "SPA Rennes",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Tango",
      icad: "ICAD000017",
      sexe: "male",
      race: "Bouledogue",
      birthdate: new Date("2019-07-22"),
      entryDate: new Date("2024-04-03"),
      distinctiveSigns: "Boite un peu",
      reasonForCare: "Sauvetage maltraitance",
      placeOfCare: "SPA Bordeaux",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 2,
    },
    {
      name: "Moka",
      icad: "ICAD000018",
      sexe: "female",
      race: "Cochon d’Inde",
      birthdate: new Date("2023-10-01"),
      entryDate: new Date("2024-02-28"),
      distinctiveSigns: "Petite cicatrice oreille",
      reasonForCare: "Cession",
      placeOfCare: "Centre NAC Toulouse",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 4,
    },
    {
      name: "Pixel",
      icad: "ICAD000019",
      sexe: "male",
      race: "Abyssin",
      birthdate: new Date("2022-06-15"),
      entryDate: new Date("2024-03-20"),
      distinctiveSigns: "Très curieux",
      reasonForCare: "Trouvé dans un parking",
      placeOfCare: "Refuge Nice",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Litchie",
      icad: "ICAD000020",
      sexe: "female",
      race: "Ragdoll",
      birthdate: new Date("2020-05-02"),
      entryDate: new Date("2024-04-07"),
      distinctiveSigns: "Très docile",
      reasonForCare: "Départ à l’étranger",
      placeOfCare: "SPA Marseille",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 1,
    },
    {
      name: "Tigrou",
      icad: "ICAD000021",
      sexe: "male",
      race: "Chat tigré",
      birthdate: new Date("2021-11-11"),
      entryDate: new Date("2024-04-10"),
      distinctiveSigns: "Queue cassée",
      reasonForCare: "Errance",
      placeOfCare: "Refuge Angers",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Chanel",
      icad: "ICAD000022",
      sexe: "female",
      race: "Sphynx",
      birthdate: new Date("2019-09-25"),
      entryDate: new Date("2024-01-20"),
      distinctiveSigns: "Sans poils",
      reasonForCare: "Cession pour allergie",
      placeOfCare: "SPA Paris",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 1,
    },
    {
      name: "Félix",
      icad: "ICAD000023",
      sexe: "male",
      race: "Chat noir",
      birthdate: new Date("2018-10-05"),
      entryDate: new Date("2024-03-11"),
      distinctiveSigns: "Gros gabarit",
      reasonForCare: "Trouvé blessé",
      placeOfCare: "Refuge Bordeaux",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Choco",
      icad: "ICAD000024",
      sexe: "male",
      race: "Lapin nain",
      birthdate: new Date("2022-12-01"),
      entryDate: new Date("2024-04-01"),
      distinctiveSigns: "Très calme",
      reasonForCare: "Portée abandonnée",
      placeOfCare: "Refuge Metz",
      isSterelised: false,
      isAdopted: false,
      isBroadcastable: false,
      isBookable: true,
      speciesId: 3,
    },
    {
      name: "Câline",
      icad: "ICAD000025",
      sexe: "female",
      race: "Chartreuse",
      birthdate: new Date("2019-04-01"),
      entryDate: new Date("2024-04-15"),
      distinctiveSigns: "Très affectueuse",
      reasonForCare: "Décès du propriétaire",
      placeOfCare: "SPA Lyon",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 1,
    },
    {
      name: "Maya",
      icad: "ICAD000026",
      sexe: "female",
      race: "Chat écaille de tortue",
      birthdate: new Date("2020-03-20"),
      entryDate: new Date("2024-04-12"),
      distinctiveSigns: "Très joueuse",
      reasonForCare: "Abandon",
      placeOfCare: "Refuge Toulouse",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
    {
      name: "Zeus",
      icad: "ICAD000027",
      sexe: "male",
      race: "Berger Allemand",
      birthdate: new Date("2016-01-01"),
      entryDate: new Date("2024-03-30"),
      distinctiveSigns: "Boite un peu",
      reasonForCare: "Âge du propriétaire",
      placeOfCare: "SPA Marseille",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: false,
      speciesId: 2,
    },
    {
      name: "Kira",
      icad: "ICAD000028",
      sexe: "female",
      race: "Chat Européen",
      birthdate: new Date("2017-07-14"),
      entryDate: new Date("2024-04-01"),
      distinctiveSigns: "Très discrète",
      reasonForCare: "Trouvée abandonnée",
      placeOfCare: "SPA Nancy",
      isSterelised: true,
      isAdopted: false,
      isBroadcastable: true,
      isBookable: true,
      speciesId: 1,
    },
  ];

  const animalsToSave = animals.map((animal) => {
    const species = speciesMap.get(animal.speciesId);
    if (!species) {
      throw new Error(`Species with ID ${animal.speciesId} not found`);
    }

    return createAnimal(
      animal.name,
      animal.icad,
      animal.sexe,
      animal.race,
      animal.birthdate,
      animal.entryDate,
      animal.distinctiveSigns,
      animal.reasonForCare,
      animal.placeOfCare,
      animal.isSterelised,
      animal.isAdopted,
      animal.isBroadcastable,
      animal.isBookable,
      species
    );
  });

  const animalRepository = dataSource.getRepository(Animal);
  for (const animal of animalsToSave) {
    await animalRepository.save(animal);
  }
};
